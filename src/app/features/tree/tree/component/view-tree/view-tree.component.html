<div class="tree-container">
  
  <!-- Tree Display Area -->
  <div class="tree-display" [attr.data-display-mode]="currentDisplay()">
    
    <!-- Loop through filtered tree data (each item is a level group) -->
    <div *ngFor="let nodeLevelGroup of filteredTreeData()" class="level-group">
      
      <!-- Loop through nodes in this level -->
      <div *ngFor="let node of nodeLevelGroup.nodeList"
           class="member-card" 
           [ngStyle]="getNodeStyle(node)"
           [class.selectable]="canSelectNode(node)"
           [class.selected]="selectedNodes().get(node.level!) === node.id"
           (click)="onNodeClick(node)">
        <p>{{ node.name }}</p>
        <small>L{{ node.level }}</small>
      </div>
      
    </div>
    
  </div>